(function(e){function t(t){for(var i,r,a=t[0],s=t[1],d=t[2],l=0,v=[];l<a.length;l++)r=a[l],Object.prototype.hasOwnProperty.call(c,r)&&c[r]&&v.push(c[r][0]),c[r]=0;for(i in s)Object.prototype.hasOwnProperty.call(s,i)&&(e[i]=s[i]);u&&u(t);while(v.length)v.shift()();return o.push.apply(o,d||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],i=!0,r=1;r<n.length;r++){var s=n[r];0!==c[s]&&(i=!1)}i&&(o.splice(t--,1),e=a(a.s=n[0]))}return e}var i={},c={app:0},o=[];function r(e){return a.p+"js/"+({}[e]||e)+"."+{"chunk-2d216214":"cece44c1","chunk-2d216257":"1caeb235","chunk-75fe6287":"6ffe0058"}[e]+".js"}function a(t){if(i[t])return i[t].exports;var n=i[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.e=function(e){var t=[],n=c[e];if(0!==n)if(n)t.push(n[2]);else{var i=new Promise((function(t,i){n=c[e]=[t,i]}));t.push(n[2]=i);var o,s=document.createElement("script");s.charset="utf-8",s.timeout=120,a.nc&&s.setAttribute("nonce",a.nc),s.src=r(e);var d=new Error;o=function(t){s.onerror=s.onload=null,clearTimeout(l);var n=c[e];if(0!==n){if(n){var i=t&&("load"===t.type?"missing":t.type),o=t&&t.target&&t.target.src;d.message="Loading chunk "+e+" failed.\n("+i+": "+o+")",d.name="ChunkLoadError",d.type=i,d.request=o,n[1](d)}c[e]=void 0}};var l=setTimeout((function(){o({type:"timeout",target:s})}),12e4);s.onerror=s.onload=o,document.head.appendChild(s)}return Promise.all(t)},a.m=e,a.c=i,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)a.d(n,i,function(t){return e[t]}.bind(null,i));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="/",a.oe=function(e){throw console.error(e),e};var s=window["webpackJsonp"]=window["webpackJsonp"]||[],d=s.push.bind(s);s.push=t,s=s.slice();for(var l=0;l<s.length;l++)t(s[l]);var u=d;o.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"33dc":function(e,t,n){"use strict";n("a0ac")},"367b":function(e,t,n){},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var i=n("7a23"),c={key:0},o=Object(i["g"])("div",{class:"title"}," QuickDrop ",-1),r={key:0},a=Object(i["g"])("div",{class:"or"},"OR",-1),s={key:1};function d(e,t,n,d,l,u){var v=Object(i["p"])("Loader"),h=Object(i["p"])("Camera"),b=Object(i["p"])("Receiver");return Object(i["l"])(),Object(i["f"])(i["a"],null,[l.cameraActive||l.receiverActive?Object(i["e"])("",!0):(Object(i["l"])(),Object(i["f"])("div",c,[o,l.socketIsConnected?(Object(i["l"])(),Object(i["f"])("div",r,[Object(i["g"])("div",null,[Object(i["g"])("button",{onClick:t[0]||(t[0]=function(){return u.handleNewSession&&u.handleNewSession.apply(u,arguments)}),class:"btn"}," New Session ")]),a,Object(i["g"])("div",null,[Object(i["g"])("div",null,[Object(i["g"])("button",{onClick:t[1]||(t[1]=function(){return u.handleJoinSession&&u.handleJoinSession.apply(u,arguments)}),class:"btn"}," Join Session ")]),Object(i["t"])(Object(i["g"])("input",{"onUpdate:modelValue":t[2]||(t[2]=function(e){return l.joinSessionCode=e}),placeholder:"ABC9",class:"code-input",onKeyup:t[3]||(t[3]=Object(i["u"])((function(){return u.handleJoinSession&&u.handleJoinSession.apply(u,arguments)}),["enter"]))},null,544),[[i["r"],l.joinSessionCode]]),Object(i["g"])("div",null,Object(i["q"])(l.joinSessionErr),1)])])):(Object(i["l"])(),Object(i["f"])("div",s,[Object(i["j"])(v)]))])),l.cameraActive?(Object(i["l"])(),Object(i["d"])(h,{key:1,onSendImage:u.handleSendImage,code:l.sessionCode},null,8,["onSendImage","code"])):l.receiverActive?(Object(i["l"])(),Object(i["d"])(b,{key:2,ref:"receiver"},null,512)):Object(i["e"])("",!0)],64)}var l=n("daa8"),u=function(e){return Object(i["n"])("data-v-4ec4db72"),e=e(),Object(i["m"])(),e},v={key:0,class:"code"},h=u((function(){return Object(i["g"])("canvas",{id:"canvas"},null,-1)})),b=u((function(){return Object(i["g"])("div",{id:"crop-mask"},null,-1)}));function p(e,t,n,c,o,r){return Object(i["l"])(),Object(i["f"])(i["a"],null,[n.code?(Object(i["l"])(),Object(i["f"])("div",v,[Object(i["i"])(" Code: "+Object(i["q"])(n.code)+" ",1),o.allowsScreenCapture?(Object(i["l"])(),Object(i["f"])("button",{key:0,onClick:t[0]||(t[0]=function(){return r.toggleMediaDevice&&r.toggleMediaDevice.apply(r,arguments)}),class:"btn-picture toggle-media"},Object(i["q"])(o.isRecordingScreen?"Record Camera":"Record Screen"),1)):Object(i["e"])("",!0)])):Object(i["e"])("",!0),Object(i["g"])("video",{id:"camera-view",autoplay:"",playsinline:"",onMousedown:t[1]||(t[1]=function(){return r.startCrop&&r.startCrop.apply(r,arguments)}),onMousemove:t[2]||(t[2]=function(){return r.moveCrop&&r.moveCrop.apply(r,arguments)}),onMouseup:t[3]||(t[3]=function(){return r.endCrop&&r.endCrop.apply(r,arguments)})},null,32),Object(i["g"])("div",null,[Object(i["g"])("button",{onClick:t[4]||(t[4]=function(){return r.handleTakePicture&&r.handleTakePicture.apply(r,arguments)}),class:"btn-picture"}," Take Picture ")]),h,b],64)}var g={name:"Camera",props:["code"],emits:["sendImage"],data:function(){return{showLiveInterval:null,allowsScreenCapture:!1,isRecordingScreen:!1,crop:{active:!1}}},mounted:function(){var e,t={video:{facingMode:"environment"},audio:!1},n=document.getElementById("camera-view");navigator.mediaDevices.getUserMedia(t).then((function(e){n.srcObject=e})).catch((function(e){return console.log(e)})),null!==(e=navigator.mediaDevices)&&void 0!==e&&e.getDisplayMedia&&(this.allowsScreenCapture=!0),window.addEventListener("mouseup",this.cancelCrop)},unmounted:function(){window.removeEventListener("mouseup",this.cancelCrop)},methods:{handleTakePicture:function(){var e=document.getElementById("camera-view"),t=document.getElementById("canvas");t.width=e.videoWidth,t.height=e.videoHeight,t.getContext("2d").drawImage(e,0,0,t.width,t.height);var n=t.toDataURL();this.$emit("sendImage",n)},toggleMediaDevice:function(){var e=this,t=document.getElementById("camera-view"),n={video:{facingMode:"environment"},audio:!1};this.isRecordingScreen?navigator.mediaDevices.getUserMedia(n).then((function(n){t.srcObject=n,e.isRecordingScreen=!e.isRecordingScreen})).catch((function(e){return console.log(e)})):navigator.mediaDevices.getDisplayMedia().then((function(n){t.srcObject=n,e.isRecordingScreen=!e.isRecordingScreen})).catch((function(e){return console.log(e)}))},startCrop:function(e){this.crop.startX=e.clientX+window.scrollX,this.crop.startY=e.clientY+window.scrollY,this.crop.active=!0},moveCrop:function(e){if(this.crop.active){this.crop.endX=e.clientX+window.scrollX,this.crop.endY=e.clientY+window.scrollY;var t=document.getElementById("crop-mask");t.style.top=Math.min(this.crop.startY,this.crop.endY)+"px",t.style.left=Math.min(this.crop.startX,this.crop.endX)+"px",t.style.height=Math.abs(this.crop.endY-this.crop.startY)+"px",t.style.width=Math.abs(this.crop.endX-this.crop.startX)+"px",t.style.display="initial"}},endCrop:function(e){this.crop.active&&(this.crop.endX=e.clientX+window.scrollX,this.crop.endY=e.clientY+window.scrollY,this.handleTakeCropPicture(),this.cancelCrop())},cancelCrop:function(){if(this.crop.active){var e=document.getElementById("crop-mask");e.style.display="none",this.crop.active=!1}},handleTakeCropPicture:function(){var e=document.getElementById("canvas");e.width=Math.abs(this.crop.endX-this.crop.startX),e.height=Math.abs(this.crop.endY-this.crop.startY);var t=document.getElementById("camera-view"),n=t.getBoundingClientRect(),i=n.x,c=n.y,o=n.width,r=n.height,a=(Math.min(this.crop.startX,this.crop.endX)-i-window.scrollX)*t.videoWidth/o,s=(Math.min(this.crop.startY,this.crop.endY)-c-window.scrollY)*t.videoHeight/r,d=e.width*t.videoWidth/o,l=e.height*t.videoHeight/r;e.getContext("2d").drawImage(t,a,s,d,l,0,0,e.width,e.height);var u=e.toDataURL();this.$emit("sendImage",u)}}},f=(n("78eb"),n("6b0d")),m=n.n(f);const j=m()(g,[["render",p],["__scopeId","data-v-4ec4db72"]]);var O=j,y={class:"receive-wrapper"},w={class:"header"},k={class:"group-flex-test"},C=["src"],S=["href"],A=["onClick"],D=["onClick"],I=["onClick","disabled"],M=["onClick","disabled"];function P(e,t,n,c,o,r){return Object(i["l"])(),Object(i["f"])("div",y,[Object(i["g"])("div",w,[Object(i["i"])(Object(i["q"])(r.displayNumPhotos())+" ",1),o.imgDataArray.length?(Object(i["l"])(),Object(i["f"])("button",{key:0,class:"img-btn clear-btn",onClick:t[0]||(t[0]=function(){return r.clearAll&&r.clearAll.apply(r,arguments)})}," Clear ")):Object(i["e"])("",!0),o.imgDataArray.length?(Object(i["l"])(),Object(i["f"])("button",{key:1,class:"img-btn clear-btn",onClick:t[1]||(t[1]=function(){return r.makePDF&&r.makePDF.apply(r,arguments)})}," Make PDF ")):Object(i["e"])("",!0)]),Object(i["g"])("div",k,[Object(i["j"])(i["b"],{name:"img-list"},{default:Object(i["s"])((function(){return[(Object(i["l"])(!0),Object(i["f"])(i["a"],null,Object(i["o"])(o.imgDataArray,(function(e,t){return Object(i["l"])(),Object(i["f"])("div",{class:"img-data-wrap",key:e.substring(0,300)},[Object(i["g"])("div",null,[Object(i["g"])("img",{src:e,ref_for:!0,ref:e.substring(0,300),class:"img-received"},null,8,C)]),Object(i["g"])("div",null,[Object(i["g"])("a",{download:"image.png",href:e,class:"img-btn"}," Download ",8,S),Object(i["g"])("button",{class:"img-btn",onClick:function(){return r.removeImg(t)}}," Remove ",8,A),Object(i["g"])("button",{class:Object(i["k"])(["img-btn",{"is-copied":o.copyKey===e.substring(0,300)}]),onClick:function(){return r.copyImgToClipboard(t)}},Object(i["q"])(o.copyKey===e.substring(0,300)?"Copied!":"Copy"),11,D),Object(i["g"])("button",{class:"img-btn",onClick:function(){return r.swapArrayValues(t,t+1)},disabled:t===o.imgDataArray.length-1}," ⇓ ",8,I),Object(i["g"])("button",{class:"img-btn",onClick:function(){return r.swapArrayValues(t,t-1)},disabled:0===t}," ⇑ ",8,M)])])})),128))]})),_:1})])])}var R=n("3835"),X=(n("a434"),n("d3b7"),n("159b"),n("8baf")),Y={width:210,height:297},E={data:function(){return{imgDataArray:[],copyKey:""}},methods:{displayNumPhotos:function(){return 0===this.imgDataArray.length?"Waiting for photo...":1===this.imgDataArray.length?"1 Photo":this.imgDataArray.length+" Photos"},clearAll:function(){this.imgDataArray=[]},removeImg:function(e){this.imgDataArray.splice(e,1)},handleReceiveImage:function(e){this.imgDataArray.push(e)},copyImgToClipboard:function(e){this.copyKey=this.imgDataArray[e].substring(0,300),fetch(this.imgDataArray[e]).then((function(e){return e.blob()})).then((function(e){navigator.clipboard.write([new window.ClipboardItem({"image/png":e})])}))},imageDimsOnA4:function(e,t){return e/t>Y.width/Y.height?[Y.width,t/e*Y.width]:[e/t*Y.height,Y.height]},makePDF:function(){var e=this,t=new X["a"];t.deletePage(1),console.log(Y),this.imgDataArray.forEach((function(n){var i=n.substring(n.indexOf("/")+1,n.indexOf(";")),c=e.$refs[n.substring(0,300)][0].width,o=e.$refs[n.substring(0,300)][0].height,r=e.imageDimsOnA4(c,o),a=Object(R["a"])(r,2),s=a[0],d=a[1];t.addPage(),t.addImage(n,i,(Y.width-s)/2,(Y.height-d)/2,s,d)}));var n=t.output("bloburl");window.open(n)},swapArrayValues:function(e,t){if(!(e<0||t<0||e>=this.imgDataArray.length||t>=this.imgDataArray.length)){var n=[this.imgDataArray[t],this.imgDataArray[e]];this.imgDataArray[e]=n[0],this.imgDataArray[t]=n[1]}}}};n("67df");const x=m()(E,[["render",P],["__scopeId","data-v-70ecbacf"]]);var _=x,T={class:"container"},B=Object(i["h"])('<div class="block" data-v-713d081c></div><div class="block" data-v-713d081c></div><div class="block" data-v-713d081c></div><div class="block" data-v-713d081c></div><div class="block" data-v-713d081c></div><div class="block" data-v-713d081c></div><div class="block" data-v-713d081c></div><div class="block" data-v-713d081c></div><div class="block" data-v-713d081c></div><div class="block" data-v-713d081c></div><div class="block" data-v-713d081c></div><div class="block" data-v-713d081c></div><div class="block" data-v-713d081c></div><div class="block" data-v-713d081c></div><div class="block" data-v-713d081c></div><div class="block" data-v-713d081c></div>',16),L=[B];function J(e,t){return Object(i["l"])(),Object(i["f"])("div",T,L)}n("33dc");const q={},N=m()(q,[["render",J],["__scopeId","data-v-713d081c"]]);var K=N,U=Object(l["a"])("https://quick-drop.herokuapp.com"),$={name:"App",components:{Camera:O,Receiver:_,Loader:K},data:function(){return{cameraActive:!1,receiverActive:!1,sessionCode:"",joinSessionCode:"",joinSessionErr:"",socketIsConnected:!1}},mounted:function(){var e=this;U.on("sessionCode",(function(t){return e.sessionCode=t})),U.on("unknownSession",(function(){return e.joinSessionErr="Invalid session code"})),U.on("initReceiver",(function(){return e.receiverActive=!0})),U.on("receiveImage",(function(t){return e.$refs.receiver.handleReceiveImage(t)}));var t=setInterval((function(){U.connected&&(clearInterval(t),e.socketIsConnected=!0)}),500)},methods:{handleNewSession:function(){U.emit("newSession"),this.cameraActive=!0},handleJoinSession:function(){U.emit("joinSession",this.joinSessionCode)},handleSendImage:function(e){U.emit("sendImage",e)}}};n("c74c");const F=m()($,[["render",d]]);var V=F;Object(i["c"])(V).mount("#app")},"67df":function(e,t,n){"use strict";n("b4c8")},"78eb":function(e,t,n){"use strict";n("367b")},a0ac:function(e,t,n){},b4c8:function(e,t,n){},c74c:function(e,t,n){"use strict";n("e98b")},e98b:function(e,t,n){}});
//# sourceMappingURL=app.842232c4.js.map